webpackJsonp([4],{119:function(a,b,c){"use strict";var d=c(12),e=c.n(d),f=c(2),g=c(0),h=c(17),i=c(120),j={isApplied:f.a.get("isApplied")};f.a.hook(function(a){"isApplied"in a&&(j.isApplied=a.isApplied)}),b.a={components:{Icon:h.a},data(){return{store:i.a,options:j,activeMenu:"scripts"}},computed:{commands(){return this.store.commands.map(function(a){var b=e()(a,2),c=b[0],d=b[1];return{name:d,key:c}})},scripts(){return this.store.scripts.map(function(a){return{name:a.custom.name||Object(g.f)(a.meta,"name"),data:a}})}},methods:{toggleMenu(a){this.activeMenu=this.activeMenu===a?null:a},getSymbolCheck(a){return`toggle-${a?"on":"off"}`},onToggle(){f.a.set("isApplied",!this.options.isApplied),this.checkReload()},onManage(){browser.runtime.openOptionsPage(),window.close()},onEditScript(a){browser.tabs.create({url:browser.runtime.getURL(`/options/index.html#scripts/${a.data.props.id}`)}),window.close()},onFindSameDomainScripts(){browser.tabs.create({url:`https://greasyfork.org/scripts/by-site/${encodeURIComponent(this.store.domain)}`})},onCommand(a){browser.tabs.sendMessage(this.store.currentTab.id,{cmd:"Command",data:a.key})},onToggleScript(a){var b=this,c=a.data,d=!c.config.enabled;Object(g.p)({cmd:"UpdateScriptInfo",data:{id:c.props.id,config:{enabled:d}}}).then(function(){c.config.enabled=d,b.checkReload()})},checkReload(){f.a.get("autoReload")&&browser.tabs.reload(this.store.currentTab.id)}}}},120:function(a,b,c){"use strict";c.d(b,"a",function(){return d});var d={scripts:[],commands:[],domain:""}},315:function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(21),e=c(36),f=c(0),g=c(61),h=c(89),i=c(62),j=c(316),k=c(120);h.c(),e["default"].prototype.i18n=f.i,new e["default"]({render:function(a){return a(j.a)}}).$mount("#app"),Object.assign(g.a,{SetPopup(a,b){k.a.currentTab.id!==b.tab.id||(k.a.commands=a.menus,Object(f.p)({cmd:"GetMetas",data:a.ids}).then(function(a){k.a.scripts=a}))}}),browser.tabs.query({currentWindow:!0,active:!0}).then(function(a){var b={id:a[0].id,url:a[0].url};if(k.a.currentTab=b,browser.tabs.sendMessage(b.id,{cmd:"GetPopup"}),/^https?:\/\//i.test(b.url)){var c=b.url.match(/:\/\/([^/]*)/),d=c[1];k.a.domain=h.a(d)||d}})},316:function(a,b,c){"use strict";var d=c(119),e=c(318),f=c(1),g=Object(f.a)(d.a,e.a,e.b,!1,function(){c(317)},null,null);b.a=g.exports},317:function(){},318:function(a,b,c){"use strict";c.d(b,"a",function(){return d}),c.d(b,"b",function(){return e});var d=function(){var a=this,b=a.$createElement,c=a._self._c||b;return c("div",{staticClass:"page-popup"},[c("div",{staticClass:"logo",class:{disabled:!a.options.isApplied}},[c("img",{attrs:{src:"/public/images/icon128.png"}})]),c("div",{staticClass:"menu-item",class:{disabled:!a.options.isApplied},on:{click:a.onToggle}},[c("icon",{attrs:{name:a.getSymbolCheck(a.options.isApplied)}}),c("div",{staticClass:"flex-auto",domProps:{textContent:a._s(a.options.isApplied?a.i18n("menuScriptEnabled"):a.i18n("menuScriptDisabled"))}})],1),c("div",{staticClass:"menu"},[c("div",{staticClass:"menu-item",on:{click:a.onManage}},[c("icon",{attrs:{name:"cog"}}),c("div",{staticClass:"flex-auto",domProps:{textContent:a._s(a.i18n("menuDashboard"))}})],1)]),c("div",{directives:[{name:"show",rawName:"v-show",value:a.store.domain,expression:"store.domain"}],staticClass:"menu"},[c("div",{staticClass:"menu-item",on:{click:a.onFindSameDomainScripts}},[c("icon",{attrs:{name:"search"}}),c("div",{staticClass:"flex-auto",domProps:{textContent:a._s(a.i18n("menuFindScripts"))}})],1)]),c("div",{directives:[{name:"show",rawName:"v-show",value:a.commands.length,expression:"commands.length"}],staticClass:"menu menu-commands",class:{expand:"commands"===a.activeMenu}},[c("div",{staticClass:"menu-item",on:{click:function(){a.toggleMenu("commands")}}},[c("div",{staticClass:"flex-auto",domProps:{textContent:a._s(a.i18n("menuCommands"))}}),c("icon",{staticClass:"icon-collapse",attrs:{name:"arrow"}})],1),c("div",{staticClass:"submenu"},a._l(a.commands,function(b){return c("div",{staticClass:"menu-item",on:{click:function(){a.onCommand(b)}}},[c("span",{domProps:{textContent:a._s(b.name)}})])}))]),c("div",{directives:[{name:"show",rawName:"v-show",value:a.scripts.length,expression:"scripts.length"}],staticClass:"menu menu-scripts",class:{expand:"scripts"===a.activeMenu}},[c("div",{staticClass:"menu-item",on:{click:function(){a.toggleMenu("scripts")}}},[c("div",{staticClass:"flex-auto",domProps:{textContent:a._s(a.i18n("menuMatchedScripts"))}}),c("icon",{staticClass:"icon-collapse",attrs:{name:"arrow"}})],1),c("div",{staticClass:"submenu"},a._l(a.scripts,function(b){return c("div",[c("div",{staticClass:"menu-item",class:{disabled:!b.data.config.enabled},on:{click:function(){a.onToggleScript(b)}}},[c("icon",{attrs:{name:a.getSymbolCheck(b.data.config.enabled)}}),c("div",{staticClass:"flex-auto ellipsis",domProps:{textContent:a._s(b.name)}})],1),c("div",{staticClass:"submenu-buttons"},[c("div",{staticClass:"submenu-button",on:{click:function(){a.onEditScript(b)}}},[c("icon",{attrs:{name:"code"}})],1)])])}))])])},e=[]}},[315]);